{% extends 'base.html.twig' %}

{% block title %}Dossier{% endblock %}

{% block body %}
    <h1><strong>{{ dossier.titre }}</strong></h1>

    <table class="table" style="margin-top:20px;">
        <tbody>
            <tr>
                <th style="text-align:left;vertical-align:top;">Id</th>
                <td>&nbsp;&nbsp;</td>
                <td style="vertical-align:top;"><strong>{{ dossier.id }}</strong></td>
            </tr>
            <tr>
                <th style="text-align:left;vertical-align:top;">Titre</th>
                <td>&nbsp;&nbsp;</td>
                <td style="vertical-align:top;">{{ dossier.titre }}</td>
            </tr>
            <tr>
                <th style="text-align:left;vertical-align:top;width:auto;">Présentation</th>
                <td>&nbsp;&nbsp;</td>
                <td style="vertical-align:top;">{{ dossier.resume }}<br/><br/>
                <a class="btn btn-primary" href="{{ path('app_dossier_edit', {'id': dossier.id}) }}" role="button">Modifier</a> |
                <a href="{{ path('app_rubrique_new', {'id_dossier': dossier.id}) }}">Ajouter une rubrique</a> |
                <a href="{{ path('app_dossier_index') }}">Liste des produits d'éditorialisation</a>
                </td>
                
            </tr>
            <tr>
            <th></th>
            <td></td>
            <td>&nbsp;&nbsp;</td>
            </tr>
            <tr>
            <th style="vertical-align:top;text-align:left;">Contenu</th>
            <td style="vertical-align:top;text-align:left;">&nbsp;&nbsp;</td>
            <td style="vertical-align:top;text-align:left;">&nbsp;&nbsp;</td>
            </tr>
            <tr>
            <th>&nbsp;&nbsp;</th>
            <td>&nbsp;&nbsp;</td>
            <td style="vertical-align:top">
            {% for rubrique in plan[0] %}
                    <strong>{{ rubrique.id }} - {{ rubrique.titre|upper }}</strong><br/><br/>
                        {% set rubriquetextes = rubrique.textes %}
                                {% if rubriquetextes|length > 0 %}
                                    {% for texte in rubriquetextes %}
                                        <p>
                                        &nbsp;&nbsp;&nbsp;&nbsp;<strong>id texte : {{ texte.id }}<br/></strong>
                                        &nbsp;&nbsp;&nbsp;&nbsp;Titre : {{ texte.titre }}<br/>
                                        {% if texte.contenu is defined %}
                                            &nbsp;&nbsp;&nbsp;&nbsp;Contenu : {{ texte.contenu }}<br/>
                                        {% endif %}
                                        {% set ressources = texte.ressources %}
                                            {% if ressources|length > 0 %}
                                                <strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Les ressources :</strong><br/>
                                                {% for ressource in ressources %}
                                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id ressource : {{ ressource.id }}<br/>
                                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{ ressource.titre }}<br/>
                                                {% endfor %}
                                            {% endif %}
                                        </p>    
                                    {% endfor %}
                                    
                                {% endif %}
                        {% for sousrubrique in rubrique.sousrubriques %}
                            <strong>- {{ sousrubrique.titre|capitalize }} - {{ sousrubrique.id }}</strong><br/>
                            {{ sousrubrique.resume }}<br/>
                                {% set sousrubriquetextes = sousrubrique.textes %}
                                {% if sousrubriquetextes|length > 0 %}
                                    {% for texte in sousrubriquetextes %}
                                        <p>
                                        &nbsp;&nbsp;&nbsp;&nbsp;<strong>id texte : {{ texte.id }}<br/></strong>
                                        &nbsp;&nbsp;&nbsp;&nbsp;Titre : {{ texte.titre }}<br/>
                                        {% if texte.contenu is defined %}
                                            &nbsp;&nbsp;&nbsp;&nbsp;Contenu : {{ texte.contenu }}<br/>
                                        {% endif %}
                                        {% set ressources = texte.ressources %}
                                            {% if ressources|length > 0 %}
                                                <strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Les ressources :</strong><br/>
                                                {% for ressource in ressources %}
                                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id ressource : {{ ressource.id }}<br/>
                                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{ ressource.titre }}<br/>
                                                {% endfor %}
                                            {% endif %}
                                        </p>
                                           
                                    {% endfor %}
                                    
                                {% endif %}
                            <br/>
                            
                        {% endfor %}

                        <a href="{{ path('app_rubrique_show', {'id': rubrique.id}) }}">Modifier</a><br/>
                    <br/>
            {% endfor %}
            </td>
            </tr>
        </tbody>
    </table>

    
    
    {% set rubriques = dossier.rubriques %}
    {% if rubriques|length < 1 %}
        {{ include('dossier/_delete_form.html.twig') }}
    {% endif %}
    
{% endblock %}
