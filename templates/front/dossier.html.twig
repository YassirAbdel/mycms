{% extends 'front/base.html.twig' %}
{% block css %}
	<link rel="stylesheet" href={{ asset('assets/front/css/dossier.css') }} />
{% endblock %}
{% block body %}
	<!-- Wrapper -->
			<div id="wrapper" class="divided">
				<!-- Additional Elements -->
				<section class="wrapper style1">
					<div class="inner top-responsive">
						<h2>{{ dossier.titre }}</h2>
						{% if dossier.soustitre %}<h3>{{ dossier.soustitre }}</h3>{% endif %}
						{% if dossier.resume %}
								<div id="intro">{{ dossier.resume|raw}}</div>
						{% endif %}
					</div>
						<div class="index">
							<!-- Unordered List -->
							<section>
								<header>
									<div class="jquery-script-ads" align="left" style="margin:-1rem auto"></div>
									<!-- Contenedor -->
									{% include 'front/commun/_menu.html.twig' %}
								</header>
								<div class="content title">
									{% set rubrique = rubriques[0] %}
									<h1>{{ rubrique.titre }}</h1>
									{% if rubrique.resume %}<span class="intro">{{ rubrique.resume|raw }}</span>{% endif %}
									{% for texte in rubrique.textes %}
										{{ texte.contenu|raw }}
										<div class="upload">
											<ul> 
												{% for file in texte.uploads %}
													<li>
														<a href={{path('app_upload_download',{'slug': file.slug, 'id':file.id})}}>{{file.titre}}</a> <span id="pdf">pdf</span>
													</li>
												{% endfor %}
											</ul>
										</div>
											<div class="row top-card-resp" >
												<div class="col-12 m-b-30">
													<div class="row">
														{% for ressource in texte.ressources %}
															{% include 'front/commun/_ressource_product.html.twig' %}
														{% endfor %}
													</div>
												</div>
											</div>
									{% endfor %}
									<script src="http://code.jquery.com/jquery-1.11.1.min.js"></script> 
									<script>
									$(function() {
										var Accordion = function(el, multiple) {
											this.el = el || {};
											this.multiple = multiple || false;

											// Variables privadas
											var links = this.el.find('.link');
											// Evento
											links.on('click', {el: this.el, multiple: this.multiple}, this.dropdown)
										}

										Accordion.prototype.dropdown = function(e) {
											var $el = e.data.el;
												$this = $(this),
												$next = $this.next();

											$next.slideToggle();
											$this.parent().toggleClass('open');

											if (!e.data.multiple) {
												$el.find('.submenu').not($next).slideUp().parent().removeClass('open');
											};
										}	

										var accordion = new Accordion($('#accordion'), false);
									});
									
									</script>
								</div>
							</section>
						</div>
					</div>
				</section>
			</div>
{% endblock %}
{% block javascript %}
<script>
	var images= document.querySelectorAll( ".content img" ),
	L = images.length, fig = document.createElement('figure'),
	who, temp
	while(L) {
		temp = fig.cloneNode(false);
		who = images[--L];
		caption = who.getAttribute("alt");
		who.parentNode.insertBefore(temp, who);
		content = document.createElement( 'figcaption' );
		content.innerHTML = caption;
		temp.appendChild(who);
		temp.appendChild(content);
	}
	$(".content img").attr("style", "height:auto;");
	//$(".content figcaption").attr("style", "max-width:350px;height:auto;");
	$(".content img").attr("id", "figure");
	//$(".content img").attr("style", "figure");

	$("#intro p").each(function(index) {
		$( this ).attr("id", "more" + index)
		
	});
	$("#intro p:nth-child(n+3)").attr("style", "display:none");
	$('<span id="moreText"><a href="#" onclick="more();">Lire la suite...</a></span>').insertBefore("#more3");

	function more() {
		
		var moreText = document.getElementById("moreText");
		
		$("#intro p").each(function(index) {
			$( this ).attr("style", "display:block")
		});

		moreText.style.display = "none";
	}

	
	//$("#intro p:nth-child(3)").attr("id", "more");
	
	
	//var images= document.querySelectorAll( "p" );

	/**
	$("#intro p:nth-child(3)").attr("id", "more");
	$("#intro p:nth-child(n+3)").attr("style", "display:none");
	$('<span id="dots"><a href="#" onclick="more();" id="myBtn">Lire la suite...</a></span>').insertBefore("#more");
	
	function more() {
		var dots = document.getElementById("dots");
		var moreText = document.getElementById("more");
		var btnText = document.getElementById("myBtn");
		var ps = document.querySelectorAll( "p" );
		
		

		if (dots.style.display === "none") {
			dots.style.display = "inline";
			btnText.innerHTML = "Read more";
			moreText.style.display = "none";
		} else {
			dots.style.display = "none";
			btnText.innerHTML = "Read less";
			moreText.style.display = "inline";
			while(ps) {
				$("#intro p:nth-child.attr("style", "display:inline");
			}
		}
		
	}
**/
function displayAll() {
	//$("#intro p:nth-child()").attr("style", "display:inline"));
}
</script>
{% endblock %}
