{% extends 'front/base.html.twig' %}
{% block css %}
	<link rel="stylesheet" href={{ asset('assets/front/css/dossier.css') }} />
	<style>
	.index {
		margin-left: -6rem;
		margin-top: 4rem;
	}
	figure { 
		display: block;
	}
	figure img {
		margin-left: 10px;
	}
	#wrapper.divided > * {
    	box-shadow: inset 0 0px 0 0 rgba(0, 0, 0, 0.075);
	}
	ul li {
		margin-left: 1.5 rem;
	}
	.card-title {
		margin-top: -0.5rem;
	}
	.type-product {
		margin-bottom: 0rem;
	}
	@media screen and (max-width: 480px) {
		.index {
			margin-left: 0rem;
			margin-top: 0rem;
		}
		.content figcaption {
			margin-top: 0rem;
		}
		figure {
			margin-bottom: 0rem;
			width: 100%
		}
		figure img {
			margin-left: 0px;
		}
	}
	@media screen and (max-width: 834px) {
		.index {
			margin-left: 0rem;
			margin-top: 0rem;
		}
		figure img {
			margin-left: 0px;
		}
	}
	@media screen and (max-width: 1024px) {
		.index {
			margin-left: 0rem;
			margin-top: 0rem;
		}
		figure img {
			margin-left: 0px;
		}
	}
	</style>
{% endblock %}
{% block body %}
	<!-- Wrapper -->
	<div id="wrapper" class="divided">
		<!-- Additional Elements -->
			<section class="wrapper style1 legende">
				<div class="inner top-responsive">
					<h2>{{article.titre }}</h2>
					<h3>{{article.soustitre }}</h3>
					{{ article.resume|raw }}
					<!--
					<div style="text-align:left;">
                        <img src="{{ vich_uploader_asset(article, 'imageFile') }}" class="card-img-top" style="height: auto; width: 50%; margin-bottom:10px;">
                    </div>
					-->
					<div class="index">
						<section>
							<div class="content title legende">
								{% set articletextes = article.textes %}
								{% if articletextes|length > 0 %}
									{% for texte in articletextes %}
										{% if texte.contenu %}{{ texte.contenu|raw }}{% endif %}
										{% if texte.uploads|length > 0 %}
											<div class="upload">
												<ul> 
													{% for file in texte.uploads %}
														<li>
															<a href={{path('app_upload_download',{'slug': file.slug, 'id':file.id})}}>{{file.titre}}</a> <span id="pdf">pdf</span>
														</li>
													{% endfor %}
												</ul>
											</div>
										{% endif %}
										{% if texte.images|length > 0 %}
											<div class="row top-card-resp" >
												<div class="col-12 m-b-30">
													<div class="row">
														{% for image in texte.images %}
															{% include 'front/commun/_ressource_product_externe.html.twig' %}
														{% endfor %}
													</div>
												</div>
											</div>
										{% endif %}
										{% set ressources = texte.ressources %}
										{% if ressources|length > 0 %}
											<div class="row top-card-resp" >
												<div class="col-12 m-b-30">
													<div class="row">
														{% for ressource in ressources %}
															{% include 'front/commun/_ressource_product.html.twig' %}
														{% endfor %}
													</div>
												</div>
											</div>
										{% endif %}
									{% endfor %}
								{% endif %}
								<script src="http://code.jquery.com/jquery-1.11.1.min.js"></script> 
							</div>
						</section>
					</div>
				</div>
			</section>
{% endblock %}
{% block javascript %}
<script>
	var images= document.querySelectorAll( ".legende img" ),
	L = images.length, fig = document.createElement('figure'),
	who, temp
	while(L) {
		temp = fig.cloneNode(false);
		who = images[--L];
		caption = who.getAttribute("alt");
		who.parentNode.insertBefore(temp, who);
		content = document.createElement( 'figcaption' );
		content.innerHTML = caption;
		temp.appendChild(who);
		temp.appendChild(content);
	}
	/**
	var $select = $(".content img");
	var $div = $("figcaption");

	var attributes = $select.prop("attributes");
	//var attributes = $select.getAttribute("style.width");

	// loop through <select> attributes and apply them on <div>
	$.each(attributes, function() {
    $div.attr(this.name, this.value);
});
**/
    $(".content img").attr("style", "width:496px;height:auto;");
	$(".content figcaption").attr("style", "width:496px;height:auto;");

</script>
{% endblock %}
